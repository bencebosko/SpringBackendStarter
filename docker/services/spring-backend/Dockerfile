FROM openjdk:21-ea-jdk-slim

ARG JAR_FILE=spring-backend-starter-1.0.jar

ENV SPRING_ACTIVE_PROFILE=local
ENV HOST=host.docker.internal
ENV SERVER_PORT=8080

ENV DEFAULT_USER=default
ENV DEFAULT_PASSWORD=password
ENV DEFAULT_EMAIL=default@gmail.com

ENV TOKEN_ENCRYPTION_KEY=404E635266556A586E3272EW357ADJ53AEG87GZ82F413F4428D4Z7DSY2B4B6250645367566B5970E354G3245234GZ49826EAD234BCS

ENV POSTGRES_PORT=5433
ENV POSTGRES_USER=admin
ENV POSTGRES_PASSWORD=password
ENV POSTGRES_DB=spring_backend

ENV SMTP_HOST=smtp.gmail.com
ENV SMTP_PORT=587
ENV SMTP_USER=admin@gmail.com
ENV SMTP_PASSWORD=password

ENV CERT_PASSWORD=password

EXPOSE $SERVER_PORT
ADD $JAR_FILE app.jar
ENTRYPOINT java -DSPRING_ACTIVE_PROFILE=$SPRING_ACTIVE_PROFILE \
                -DHOST=$HOST \
                -DDEFAULT_USER=$DEFAULT_USER \
                -DDEFAULT_PASSWORD=$DEFAULT_PASSWORD \
                -DDEFAULT_EMAIL=$DEFAULT_EMAIL \
                -DTOKEN_ENCRYPTION_KEY=$TOKEN_ENCRYPTION_KEY \
                -DPOSTGRES_PORT=$POSTGRES_PORT \
                -DPOSTGRES_USER=$POSTGRES_USER \
                -DPOSTGRES_PASSWORD=$POSTGRES_PASSWORD \
                -DPOSTGRES_DB=$POSTGRES_DB \
                -DSMTP_HOST=$SMTP_HOST \
                -DSMTP_PORT=$SMTP_PORT \
                -DSMTP_USER=$SMTP_USER \
                -DSMTP_PASSWORD=$SMTP_PASSWORD \
                -DCERT_PASSWORD=$CERT_PASSWORD \
                -jar /app.jar
